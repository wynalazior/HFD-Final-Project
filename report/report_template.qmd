---
title: "HFD Final Project – Group [GROUP NUMBER]"
subtitle: "Z Guided Trend Strategy for SP & NQ Futures"
author: "[STUDENT NAME(S)]"
date: "[DATE]"
format:
  html:
    toc: true
    toc-depth: 3
    number-sections: true
    code-fold: true
    code-summary: "Show Code"
execute:
  echo: false
  warning: false
  message: false
---

# Executive Summary

This report documents the development, optimization, and performance evaluation of the Z Guided Trend strategy applied to S&P 500 (SP) and NASDAQ (NQ) futures contracts.

---

# 1. Project Setup

## 1.1 Data Specifications

- **Assets:** S&P 500 (SP) & NASDAQ (NQ) futures
- **Frequency:** 1-minute bars
- **Period:** 2023 Q1 – 2025 Q2
- **Trading:** Separate signals per asset, aggregated into single portfolio

## 1.2 Trading Constraints

- **Excluded windows:** 9:31–9:40 (opening chaos), 15:51–16:00 (closing auction)
- **No trading window:** 9:31–9:55 (volatility buffer)
- **Forced flat:** 15:40 onwards (no overnight positions)
- **No overnight exposure**
- **Transaction costs:** Included in all P&L calculations

---

# 2. Strategy Description

## 2.1 Strategy Overview

The Z Guided Trend strategy is a **trend-following, intraday strategy** that combines multiple technical indicators to generate entry and exit signals. The strategy uses z-score analysis to identify overbought/oversold conditions and momentum confirmation to improve trade quality.

## 2.2 Strategy Type and Classification

- **Type:** Trend-following, mean-reversion confirmation
- **Time Horizon:** Intraday (minutes to hours)
- **Entry Type:** Momentum-based confirmation on trend alignment
- **Exit Type:** Trend reversal, stop-loss (z-space), or forced liquidation

## 2.3 Core Strategy Elements

### 2.3.1 Trend Definition

The strategy uses a dual SMA framework to identify intraday trends:

1. **Fast SMA (Primary Level Indicator)**
   - Window: [SPECIFY YOUR WINDOW]
   - Purpose: Identifies current price level relative to trend
   - Signal: Price position above/below fast SMA

2. **Slow SMA (Trend Confirmation)**
   - Window: [SPECIFY YOUR WINDOW] (typically Slow = Fast × Slow_Multiplier)
   - Slow Multiplier: [SPECIFY YOUR VALUE]
   - Purpose: Confirms macro trend direction
   - Signal: Slope of slow SMA indicates trend strength

3. **Slope Analysis**
   - Lookback Window (m): [SPECIFY YOUR VALUE] bars
   - Calculation: Change in slow SMA over m-bar period
   - Interpretation: Positive slope = uptrend, Negative slope = downtrend

### 2.3.2 Z-Score Framework

Z-score is calculated as the standardized deviation from the fast SMA:

$$Z = \frac{\text{Price} - \text{Fast SMA}}{\text{Standard Deviation}}$$

**Components:**
- **Z Level:** Current standardized price deviation
- **Z Momentum:** Rate of change of Z-score (confirms acceleration/deceleration)
- **Lookback for Z calculation:** [SPECIFY YOUR VALUE] bars

### 2.3.3 Entry Logic

**Long Entry Conditions (ALL must be true):**
1. Slow SMA slope > 0 (uptrend confirmed)
2. Price > Fast SMA (price above mean)
3. Z-score > [YOUR Z_ENTRY THRESHOLD] (overextended enough)
4. Z-momentum > [YOUR Z_MOM THRESHOLD] (z-score accelerating into entry)
5. Outside no-trade window (after 09:55)
6. No entry after 14:30 (prevents late-day exposure)

**Short Entry Conditions (ALL must be true):**
1. Slow SMA slope < 0 (downtrend confirmed)
2. Price < Fast SMA (price below mean)
3. Z-score < -[YOUR Z_ENTRY THRESHOLD] (overextended enough)
4. Z-momentum < -[YOUR Z_MOM THRESHOLD] (z-score accelerating into entry)
5. Outside no-trade window (after 09:55)
6. No entry after 14:30 (prevents late-day exposure)

### 2.3.4 Exit Logic

The strategy employs multiple exit mechanisms:

**1. Trend Reversal Exit:**
- Exit long if: Slow SMA slope becomes ≤ 0
- Exit short if: Slow SMA slope becomes ≥ 0

**2. Z-Score Stop-Loss:**
- Exit long if: Z-score < -[YOUR Z_SL THRESHOLD]
- Exit short if: Z-score > [YOUR Z_SL THRESHOLD]

**3. Extreme Z-Score Exit:**
- Exit long if: Z-score > [YOUR Z_STOP THRESHOLD] (too extended)
- Exit short if: Z-score < -[YOUR Z_STOP THRESHOLD] (too extended)

**4. Forced Flat:**
- All positions closed at 15:40 (before forced close time)

### 2.3.5 Risk Controls and Trade Management

**Cooldown Period:**
- After any exit, no new entry for [YOUR COOLDOWN] bars
- Purpose: Reduces rapid flip-flopping and improves signal quality
- Applies to the same asset only

**One Position Per Asset:**
- Maximum 1 long position or 1 short position per asset at any time
- Prevents over-leveraging on single trend

**Position Sizing:**
- Fixed notional per contract (or fixed shares if equity)
- Consistent across all trades

---

# 3. Strategy Selection and Parameter Optimization

## 3.1 Strategy Selection Process

Describe the process of selecting the Z Guided Trend strategy:

[Explain why this strategy was chosen over alternatives. Discuss factors such as:
- Market environment characteristics
- Preliminary backtesting results
- Risk/return considerations
- Feasibility of implementation
- Any theoretical or empirical justification]

## 3.2 Data Split Strategy

- **Training Set:** [LIST YOUR QUARTERS] (used for grid search evaluation)
- **Validation Set:** [LIST YOUR QUARTERS] (used for parameter selection)
- **Test Set:** [LIST YOUR QUARTERS] (unseen data for final evaluation)

## 3.3 Parameter Grid and Search Space

The following parameters were optimized via exhaustive grid search:

| Parameter | Type | Search Range | Description |
|-----------|------|--------------|-------------|
| SMA Window | Integer | [SPECIFY RANGE] | Fast SMA period in minutes |
| Slow Multiplier | Float | [SPECIFY RANGE] | Slow SMA = Fast SMA × multiplier |
| Slope Lookback (m) | Integer | [SPECIFY RANGE] | Bars for slope calculation |
| Z Entry Threshold | Float | [SPECIFY RANGE] | Z-score entry trigger |
| Z Stop Threshold | Float | [SPECIFY RANGE] | Z-score extreme exit |
| Z Stop-Loss Threshold | Float | [SPECIFY RANGE] | Z-score stop-loss |
| Z Momentum Threshold | Float | [SPECIFY RANGE] | Z-momentum confirmation |
| Cooldown Period | Integer | [SPECIFY RANGE] | Bars after exit before new entry |

## 3.4 Optimization Objective and Methodology

**Selection Criterion:** Maximize Net P&L (transaction costs included)

**Rationale:**
- Direct profit maximization over selected time period
- Transaction costs automatically penalize over-trading
- Balances absolute returns against market exposure

**Grid Search Methodology:**
[Describe your grid search approach:
- Total number of parameter combinations evaluated
- Computational methodology
- How parameters were selected from grid search results
- Validation vs. test set performance comparison]

## 3.5 Optimal Parameters Found

### For SP (S&P 500 Futures):
- SMA Window: [VALUE] minutes
- Slow Multiplier: [VALUE]
- Slope Lookback: [VALUE] bars
- Z Entry Threshold: [VALUE]
- Z Stop Threshold: [VALUE]
- Z Stop-Loss Threshold: [VALUE]
- Z Momentum Threshold: [VALUE]
- Cooldown Period: [VALUE] bars

### For NQ (NASDAQ Futures):
- SMA Window: [VALUE] minutes
- Slow Multiplier: [VALUE]
- Slope Lookback: [VALUE] bars
- Z Entry Threshold: [VALUE]
- Z Stop Threshold: [VALUE]
- Z Stop-Loss Threshold: [VALUE]
- Z Momentum Threshold: [VALUE]
- Cooldown Period: [VALUE] bars

## 3.6 Selection Justification

Describe why these parameters were selected over other candidates:

[Provide detailed explanation of parameter selection rationale:
- Performance metrics on validation set vs. alternatives
- Stability across different market regimes
- Robustness of parameter set
- Economic interpretation of selected parameters
- Any empirical patterns observed during optimization]

---

# 4. Strategy Performance Analysis

## 4.1 Performance Summary Table

### 4.1.1 Portfolio Aggregated Results

| Metric | Gross Value | Net Value |
|--------|-------------|-----------|
| **Cumulative P&L** | $ [INSERT] | $ [INSERT] |
| **Sharpe Ratio** | [INSERT] | [INSERT] |
| **Calmar Ratio** | [INSERT] | [INSERT] |
| **Maximum Drawdown** | $ [INSERT] | $ [INSERT] |
| **Win Rate** | [INSERT]% | [INSERT]% |
| **Average Daily Trades** | [INSERT] | [INSERT] |
| **Total Days Traded** | [INSERT] | [INSERT] |

### 4.1.2 Per-Asset Results

#### S&P 500 (SP)

| Metric | Gross Value | Net Value |
|--------|-------------|-----------|
| **Cumulative P&L** | $ [INSERT] | $ [INSERT] |
| **Sharpe Ratio** | [INSERT] | [INSERT] |
| **Calmar Ratio** | [INSERT] | [INSERT] |
| **Maximum Drawdown** | $ [INSERT] | $ [INSERT] |
| **Win Rate** | [INSERT]% | [INSERT]% |
| **Average Daily Trades** | [INSERT] | [INSERT] |

#### NASDAQ (NQ)

| Metric | Gross Value | Net Value |
|--------|-------------|-----------|
| **Cumulative P&L** | $ [INSERT] | $ [INSERT] |
| **Sharpe Ratio** | [INSERT] | [INSERT] |
| **Calmar Ratio** | [INSERT] | [INSERT] |
| **Maximum Drawdown** | $ [INSERT] | $ [INSERT] |
| **Win Rate** | [INSERT]% | [INSERT]% |
| **Average Daily Trades** | [INSERT] | [INSERT] |

---

## 4.2 Cumulative P&L Analysis

### 4.2.1 Portfolio-Level Cumulative P&L (Daily Aggregated)

[INSERT FIGURE: Time series chart showing:
- Gross Cumulative P&L (daily aggregated)
- Net Cumulative P&L (daily aggregated)
- Legend clearly identifying gross vs. net
- Date range on x-axis
- P&L ($) on y-axis
- Grid lines for readability]

**Figure Caption:** Portfolio cumulative gross and net P&L based on daily aggregated returns from [START DATE] to [END DATE]. Gray shading indicates periods of drawdown. Net P&L accounts for transaction costs.

### 4.2.2 Quarterly Performance Breakdown

[INSERT FIGURE: Bar or column chart showing:
- Net P&L by quarter
- Sharpe Ratio by quarter
- Average daily trades by quarter
- Calmar Ratio by quarter
- Color coding for positive/negative performance]

**Figure Caption:** Quarterly performance metrics for the Z Guided Trend strategy. Each quarter represents approximately [X] trading days.

---

## 4.3 Per-Asset Comparison

### 4.3.1 SP vs NQ Performance

[INSERT FIGURE: Comparison chart showing:
- Net P&L by quarter for both assets
- Sharpe Ratio comparison
- Trade frequency comparison
- Return distribution comparison]

**Figure Caption:** Comparative performance analysis of S&P 500 (SP) and NASDAQ (NQ) futures under the Z Guided Trend strategy.

---

# 5. Key Findings and Analysis

## 5.1 Strategy Strengths

- **Strength 1:** [Describe what worked well]
- **Strength 2:** [Describe what worked well]
- **Strength 3:** [Describe what worked well]

## 5.2 Key Observations

- **Observation 1:** [Discuss market conditions or performance patterns]
- **Observation 2:** [Discuss market conditions or performance patterns]
- **Observation 3:** [Discuss market conditions or performance patterns]

## 5.3 Risk Management Effectiveness

Discuss how well the risk controls performed:
- How effective was the cooldown period?
- Did the Z-score stop-losses protect capital?
- Were there any unexpected drawdown periods?
- How often were positions forced flat at 15:40?

## 5.4 Transaction Cost Impact

Analyze the impact of transaction costs on strategy performance:
- Gross Sharpe vs. Net Sharpe
- Trade frequency and cost efficiency
- Average profit per trade (before and after costs)

---

# 6. Conclusion

## 6.1 Summary

The Z Guided Trend strategy was successfully implemented and optimized for both SP and NQ futures. The strategy combines trend confirmation with z-score momentum analysis to generate intraday trading signals.

## 6.2 Overall Assessment

[Provide overall assessment of strategy performance relative to objectives]

## 6.3 Opportunities for Improvement

[Discuss potential enhancements or modifications to the strategy]

---

# Appendix: Technical Notes

## A.1 Transaction Cost Assumptions

- **Per-contract commission:** $ [INSERT]
- **Bid-ask spread:** [INSERT] points
- **Slippage allowance:** [INSERT] points

## A.2 Assumptions

- 1. [List assumption 1]
- 2. [List assumption 2]
- 3. [List assumption 3]

## A.3 Data Quality Notes

- [Any data cleaning or adjustment notes]
- [Any gaps or issues encountered]

---

# References

[Add any academic references, documentation, or external materials cited]
